function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1QCC":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return l})),n("EcEN");var r=n("LvDl"),a=function(e,t){return r.isEqual(e,t)},i=function(e){return r.cloneDeep(e)},o=function(e,t){return r.isEqual(e,t)},c=function(e){return r.cloneDeep(e)},s=function(e){return r.cloneDeep(e)},l=function(e,t){return r.isEqual(e,t)}},"6eBy":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("l7GE"),a=n("ZUHj");function i(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(t){_classCallCheck(this,e),this.durationSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new c(e,this.durationSelector))}}]),e}(),c=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(a.a)(this,t))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(e,t,n,r,a){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,_get(_getPrototypeOf(t.prototype),"_next",this).call(this,e)}}}]),t}(r.a)},Lcz0:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"mealTypeUpdate",(function(){return b})),n.d(r,"mealTypeCreate",(function(){return y})),n.d(r,"mealTypeDelete",(function(){return m})),n.d(r,"mealTypeDeleteFailed",(function(){return h}));var a,i,o=n("ofXK"),c=n("3Pt+"),s=n("tyNb"),l=n("fXoL"),u=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=l.Jb({type:a,selectors:[["rg-meal-types-shell"]],decls:1,vars:0,template:function(e,t){1&e&&l.Qb(0,"router-outlet")},directives:[s.g],encapsulation:2,changeDetection:0}),a),p=function e(){_classCallCheck(this,e)},f=n("RLuz"),d=n("kt0X"),b=Object(d.n)("[MealTypes] Update",Object(d.s)()),y=Object(d.n)("[MealTypes] Create",Object(d.s)()),m=Object(d.n)("[MealTypes] Delete",Object(d.s)()),h=Object(d.n)("[MealTypes] DeleteFailed",Object(d.s)()),v=n("FrCf"),T=n("1QCC"),k=n("XNiG"),C=n("l5mm"),O=n("lJxs"),_=n("6eBy"),g=((i=function(){function e(t){var n=this;_classCallCheck(this,e),this.fb=t,this.saved=new l.o,this.form=this.fb.group({caption:["",c.s.required],kkal:0,protein:0,fat:0,carbon:0}),this._mealTypeSub=new k.a,this._mealType$=this._mealTypeSub.asObservable().pipe(Object(O.a)((function(e){return e}))),this._mealType$.subscribe((function(e){n.patchForm(e),n.recalculateFormChanges(e)})),this.form.valueChanges.pipe(Object(_.a)((function(){return Object(C.a)(500)}))).subscribe((function(e){n.mealType.caption=e.caption,n.mealType.kkalTotal=e.kkal,n.mealType.proteinPart=e.protein,n.mealType.fatPart=e.fat,n.mealType.carbonPart=e.carbon,n.recalculateFormChanges(n.mealType)}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"patchForm",value:function(e){this.form.patchValue({caption:e.caption,kkal:e.kkalTotal,protein:e.proteinPart,fat:e.fatPart,carbon:e.carbonPart})}},{key:"recalculateFormChanges",value:function(e){var t=Object(T.f)(e,this._mealTypeOriginal);t&&this.form.dirty&&this.form.markAsPristine(),!t&&this.form.pristine&&this.form.markAsDirty()}},{key:"save",value:function(){this.form.valid&&(this.form.dirty?this.saved.next(this.mealType):this.errorMessages="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}},{key:"resetClicked",value:function(){this._mealTypeSub.next(this._mealTypeOriginal)}},{key:"mealType",get:function(){return this._mealType},set:function(e){(!this._mealType&&e||e&&this._mealType&&e.id!==this._mealType.id)&&(this._mealType=Object(T.c)(e),this._mealTypeOriginal=Object(T.c)(e),this._mealTypeSub.next(this._mealType),this.form.markAsPristine(),this.form.markAsUntouched())}}]),e}()).\u0275fac=function(e){return new(e||i)(l.Pb(c.c))},i.\u0275cmp=l.Jb({type:i,selectors:[["rg-meal-types-item-row"]],inputs:{index:"index",mealType:"mealType"},outputs:{saved:"saved"},decls:30,vars:14,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-sm-4"],["formControlName","caption","type","text",1,"form-control","form-control-sm"],["caption",""],[1,"form-group","col-sm-2"],["formControlName","kkal","type","number",1,"form-control","form-control-sm"],["formControlName","protein","type","number",1,"form-control","form-control-sm"],["formControlName","fat","type","number",1,"form-control","form-control-sm"],["formControlName","carbon","type","number",1,"form-control","form-control-sm"],[1,"form-row","justify-content-end"],[1,"col-auto"],["type","submit",1,"btn","btn-primary",3,"disabled","hidden"],[1,"btn","btn-secondary",3,"hidden","click"]],template:function(e,t){1&e&&(l.Vb(0,"form",0),l.hc("ngSubmit",(function(e){return t.save()})),l.Vb(1,"div",1),l.Vb(2,"div",2),l.Vb(3,"label"),l.Fc(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),l.Ub(),l.Qb(5,"input",3,4),l.Ub(),l.Vb(7,"div",5),l.Vb(8,"label"),l.Fc(9,"\u041a\u041a\u0430\u043b"),l.Ub(),l.Qb(10,"input",6),l.Ub(),l.Vb(11,"div",5),l.Vb(12,"label"),l.Fc(13,"\u0411\u0435\u043b\u043a\u043e\u0432, %"),l.Ub(),l.Qb(14,"input",7),l.Ub(),l.Vb(15,"div",5),l.Vb(16,"label"),l.Fc(17,"\u0416\u0438\u0440\u043e\u0432, %"),l.Ub(),l.Qb(18,"input",8),l.Ub(),l.Vb(19,"div",5),l.Vb(20,"label"),l.Fc(21,"\u0423\u0433\u043b., %"),l.Ub(),l.Qb(22,"input",9),l.Ub(),l.Ub(),l.Vb(23,"div",10),l.Vb(24,"div",11),l.Vb(25,"button",12),l.Fc(26," Save "),l.Ub(),l.Ub(),l.Vb(27,"div",11),l.Vb(28,"button",13),l.hc("click",(function(e){return t.resetClicked()})),l.Fc(29," Reset "),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.oc("formGroup",t.form),l.Cb(3),l.Db("for","captionCtrl"+t.index),l.Cb(2),l.Db("id","captionCtrl"+t.index),l.Cb(3),l.Db("for","kkalCtrl"+t.index),l.Cb(2),l.Db("id","kkalCtrl"+t.index),l.Cb(2),l.Db("for","proteinCtrl"+t.index),l.Cb(2),l.Db("id","proteinCtrl"+t.index),l.Cb(2),l.Db("for","fatCtrl"+t.index),l.Cb(2),l.Db("id","fatCtrl"+t.index),l.Cb(2),l.Db("for","carbonCtrl"+t.index),l.Cb(2),l.Db("id","carbonCtrl"+t.index),l.Cb(3),l.oc("disabled",!t.form.valid)("hidden",!t.form.dirty),l.Cb(3),l.oc("hidden",!t.form.dirty))},directives:[c.u,c.l,c.e,c.a,c.k,c.d,c.p],styles:[""]}),i);function j(e,t){if(1&e){var n=l.Wb();l.Vb(0,"div",8),l.Vb(1,"rg-meal-types-item-row",9),l.hc("saved",(function(e){return l.xc(n),l.jc().onSaved(e)})),l.Ub(),l.Vb(2,"div",10),l.Vb(3,"button",11),l.hc("click",(function(e){l.xc(n);var r=t.index;return l.jc().removeMealType(r)})),l.Qb(4,"i",12),l.Ub(),l.Ub(),l.Ub()}if(2&e){var r=t.$implicit,a=t.index;l.Cb(1),l.oc("mealType",r)("index",a)}}var w,U,x,V,M,P,S=((w=function(){function e(){_classCallCheck(this,e),this.saved=new l.o,this.added=new l.o,this.deleted=new l.o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSaved",value:function(e){this.saved.next(e)}},{key:"removeMealType",value:function(e){this.deleted.next(this.mealTypes[e].id)}},{key:"addNewMealType",value:function(){this.added.next(!0)}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275cmp=l.Jb({type:w,selectors:[["rg-meal-types-list"]],inputs:{mealTypes:"mealTypes"},outputs:{saved:"saved",added:"added",deleted:"deleted"},decls:10,vars:1,consts:[[1,"card","border-primary","m-3"],[1,"card-header"],[1,"card-body","text-primary"],[1,"card-text","pr-3"],["class","d-flex align-items-end",4,"ngFor","ngForOf"],[1,"form-group"],["type","button",1,"btn","btn-primary","ml-3","btn-sm",3,"click"],[1,"fas","fa-folder-plus","mr-1"],[1,"d-flex","align-items-end"],[1,"flex-grow-1",3,"mealType","index","saved"],[1,"justify-content-center","align-items-center"],["type","button",1,"btn","btn-primary","btn-sm","mx-3","mb-3",3,"click"],[1,"fas","fa-folder-minus"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Fc(2," Meal Types "),l.Ub(),l.Vb(3,"div",2),l.Vb(4,"div",3),l.Dc(5,j,5,2,"div",4),l.Vb(6,"div",5),l.Vb(7,"button",6),l.hc("click",(function(e){return t.addNewMealType()})),l.Qb(8,"i",7),l.Fc(9,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c MealType "),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(5),l.oc("ngForOf",t.mealTypes))},directives:[o.k,g],styles:[""]}),w),D=[{path:"",component:u,children:[{path:"",pathMatch:"full",redirectTo:"all"},{path:"all",component:(U=function(){function e(t,n){_classCallCheck(this,e),this.store=t,this.shared=n,this.mealTypes$=this.store.select(f.f)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSaved",value:function(e){this.shared.ifEmpty(e.id)?this.store.dispatch(r.mealTypeCreate({mealType:e})):this.store.dispatch(r.mealTypeUpdate({mealType:e}))}},{key:"onDeleted",value:function(e){this.shared.ifEmpty(e)||this.store.dispatch(r.mealTypeDelete({id:e}))}},{key:"onAdded",value:function(){var e=new p;this.store.dispatch(r.mealTypeCreate({mealType:e}))}}]),e}(),U.\u0275fac=function(e){return new(e||U)(l.Pb(d.h),l.Pb(v.a))},U.\u0275cmp=l.Jb({type:U,selectors:[["rg-meal-types-provider"]],decls:2,vars:3,consts:[[3,"mealTypes","saved","added","deleted"]],template:function(e,t){1&e&&(l.Vb(0,"rg-meal-types-list",0),l.hc("saved",(function(e){return t.onSaved(e)}))("added",(function(e){return t.onAdded()}))("deleted",(function(e){return t.onDeleted(e)})),l.kc(1,"async"),l.Ub()),2&e&&l.oc("mealTypes",l.lc(1,1,t.mealTypes$))},directives:[S],pipes:[o.b],encapsulation:2,changeDetection:0}),U)}]}],F=((x=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:x}),x.\u0275inj=l.Mb({factory:function(e){return new(e||x)},imports:[[s.f.forChild(D)],s.f]}),x),N=n("snw9"),E=n("5+tZ"),R=n("JIr8"),$=n("LRne"),Q=((V=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:V}),V.\u0275inj=l.Mb({factory:function(e){return new(e||V)}}),V),I=n("AytR"),J=n("tk/3"),L=((P=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.shared=n}return _createClass(e,[{key:"updateMealType",value:function(e){return this.http.post(I.a.mealTypesUrl+I.a.updateMealType,e)}},{key:"createMealType",value:function(e){return e.id=this.shared.getGuidEmpty(),this.http.post(I.a.mealTypesUrl+I.a.updateMealType,e)}},{key:"deleteMealType",value:function(e){return this.http.post(I.a.mealTypesUrl+I.a.deleteMealType,'"'.concat(e,'"'),{headers:{"Content-Type":"application/json"}})}}]),e}()).\u0275fac=function(e){return new(e||P)(l.dc(J.b),l.dc(v.a))},P.\u0275prov=l.Lb({token:P,factory:P.\u0275fac,providedIn:Q}),P),A=((M=function e(t,n){var a=this;_classCallCheck(this,e),this.actions$=t,this.mealTypesService=n,this.updateMealType$=Object(N.d)((function(){return a.actions$.pipe(Object(N.e)(r.mealTypeUpdate),Object(E.a)((function(e){return a.mealTypesService.updateMealType(e.mealType).pipe(Object(O.a)((function(e){return f.a.mealTypeUpdateSuccess({mealType:e})})))})))})),this.createMealType$=Object(N.d)((function(){return a.actions$.pipe(Object(N.e)(r.mealTypeCreate),Object(E.a)((function(e){return a.mealTypesService.createMealType(e.mealType).pipe(Object(O.a)((function(e){return f.a.mealTypeCreateSuccess({mealType:e})})))})))})),this.deleteMealType$=Object(N.d)((function(){return a.actions$.pipe(Object(N.e)(r.mealTypeDelete),Object(E.a)((function(e){return a.mealTypesService.deleteMealType(e.id).pipe(Object(O.a)((function(e){return f.a.mealTypeDeleteSuccess({id:e})})),Object(R.a)((function(e){return Object($.a)(r.mealTypeDeleteFailed({status:e.error}))})))})))}))}).\u0275fac=function(e){return new(e||M)(l.dc(N.a),l.dc(L))},M.\u0275prov=l.Lb({token:M,factory:M.\u0275fac}),M),q=Object(d.p)({deleteStatus:""},Object(d.r)(r.mealTypeDeleteFailed,(function(e,t){var n=t.status;return Object.assign(Object.assign({},e),{deleteStatus:n})})),Object(d.r)(f.a.mealTypeDeleteSuccess,(function(e,t){var n=t.id;return Object.assign(Object.assign({},e),{deleteStatus:n})})));function z(e,t){return q(e,t)}var G,X=n("z6cu"),B=n("gCoc"),W=((G=function(){function e(t){_classCallCheck(this,e),this.fakeback=t}return _createClass(e,[{key:"intercept",value:function(e,t){if(e.url.includes(I.a.mealTypesUrl)&&e.url.endsWith(I.a.updateMealType)&&"POST"===e.method)return this.ok(this.fakeback.updateMealType(e.body));if(e.url.includes(I.a.mealTypesUrl)&&e.url.endsWith(I.a.deleteMealType)&&"POST"===e.method){var n=this.fakeback.deleteMealType(e.body);return n===e.body?this.ok(n):this.badRequest(n)}return t.handle(e)}},{key:"ok",value:function(e){return Object($.a)(new J.d({status:200,body:e}))}},{key:"badRequest",value:function(e){return Object($.a)(new J.d({status:400,body:e}))}},{key:"error",value:function(e){return Object(X.a)({error:{message:e}})}}]),e}()).\u0275fac=function(e){return new(e||G)(l.dc(B.a))},G.\u0275prov=l.Lb({token:G,factory:G.\u0275fac}),G);n.d(t,"MealTypesModule",(function(){return Z}));var H,Z=((H=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:H}),H.\u0275inj=l.Mb({factory:function(e){return new(e||H)},providers:[I.a.useFakeback?{provide:J.a,useClass:W,multi:!0}:[]],imports:[[o.c,F,c.r,d.j.forFeature("mealTypes",z),N.c.forFeature([A]),Q]]}),H)},l5mm:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("HDdC"),a=n("D0XW"),i=n("Y7HM");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;return(!Object(i.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=a.a),new r.a((function(n){return n.add(t.schedule(c,e,{subscriber:n,counter:0,period:e})),n}))}function c(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}}}]);