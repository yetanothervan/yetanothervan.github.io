(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{LVab:function(t,e,r){"use strict";r.r(e);var o=r("ofXK"),i=r("tyNb"),n=r("fXoL");let s=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Jb({type:t,selectors:[["rg-report-shell"]],decls:2,vars:0,consts:[[2,"margin-top","20px"]],template:function(t,e){1&t&&(n.Vb(0,"div",0),n.Qb(1,"router-outlet"),n.Ub())},directives:[i.g],encapsulation:2,changeDetection:0}),t})();var c=r("RLuz"),a=r("itXk"),p=r("lJxs");class l{constructor(t,e,r){this.id=t,this.caption=e,this.weight=r}}class d{constructor(){this.items=[]}}var u=r("kt0X"),h=r("FrCf");function f(t,e){if(1&t&&(n.Vb(0,"div",4),n.Vb(1,"a",5),n.Fc(2),n.Ub(),n.Vb(3,"a"),n.Fc(4),n.Ub(),n.Ub()),2&t){const t=e.$implicit;n.Cb(2),n.Gc(t.caption),n.Cb(2),n.Gc(t.weight)}}function b(t,e){if(1&t&&(n.Vb(0,"div"),n.Vb(1,"h3"),n.Fc(2),n.Ub(),n.Vb(3,"div",2),n.Dc(4,f,5,2,"div",3),n.Ub(),n.Ub()),2&t){const t=e.$implicit;n.Cb(2),n.Hc("",t.caption,":"),n.Cb(2),n.oc("ngForOf",t.items)}}let m=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Jb({type:t,selectors:[["rg-report-ingredients-list"]],inputs:{reportDays:"reportDays"},decls:2,vars:1,consts:[[1,"container"],[4,"ngFor","ngForOf"],[1,"report"],["class","report-item-row row d-flex w-50",4,"ngFor","ngForOf"],[1,"report-item-row","row","d-flex","w-50"],[1,"flex-grow-1"]],template:function(t,e){1&t&&(n.Vb(0,"div",0),n.Dc(1,b,5,2,"div",1),n.Ub()),2&t&&(n.Cb(1),n.oc("ngForOf",e.reportDays))},directives:[o.k],styles:[".report[_ngcontent-%COMP%]   .report-item-row[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}"]}),t})();const g=[{path:"",component:s,children:[{path:"",pathMatch:"full",redirectTo:"summary"},{path:"summary",component:(()=>{class t{constructor(t,e){this.store=t,this.shared=e,this.reportDays$=Object(a.a)([this.store.select(c.c),this.store.select(c.d),this.store.select(c.e)]).pipe(Object(p.a)(([t,e,r])=>{var o;const i=[];if(!t||0===(null===(o=t)||void 0===o?void 0:o.length))return i;t.forEach(t=>{const o=this.getDayReport(t,e,r);i.push(o)});const n=this.getReportTotal(i);return i.push(n),i}))}ngOnInit(){}getReportTotal(t){const e=new d;return e.caption="Total",t.forEach(t=>{t.items.forEach(t=>{let r=e.items.find(e=>e.id===t.id);r||(r=new l(t.id,t.caption,0),e.items.push(r)),r.weight+=t.weight})}),e&&e.items&&this.shared.sortMatTable(e.items,"caption",!0),e}getDayReport(t,e,r){var o;const i=new d;return(null===(o=t)||void 0===o?void 0:o.meals)?(i.caption=t.caption,t.meals.forEach(t=>{var o;(null===(o=t)||void 0===o?void 0:o.mealItems)&&t.mealItems.forEach(t=>{var o;const n=e.find(e=>e.id===t.dishId);(null===(o=n)||void 0===o?void 0:o.items)&&n.items.forEach(e=>{const o=r.find(t=>t.id===e.ingredientId);let n=i.items.find(t=>t.id===o.id);n||(n=new l(o.id,o.caption,0),i.items.push(n)),n.weight+=e.weight*t.weight})})}),i&&i.items&&this.shared.sortMatTable(i.items,"caption",!0),i):i}}return t.\u0275fac=function(e){return new(e||t)(n.Pb(u.h),n.Pb(h.a))},t.\u0275cmp=n.Jb({type:t,selectors:[["rg-report-provider"]],decls:2,vars:3,consts:[[3,"reportDays"]],template:function(t,e){1&t&&(n.Qb(0,"rg-report-ingredients-list",0),n.kc(1,"async")),2&t&&n.oc("reportDays",n.lc(1,1,e.reportDays$))},directives:[m],pipes:[o.b],encapsulation:2,changeDetection:0}),t})()}]}];let w=(()=>{class t{}return t.\u0275mod=n.Nb({type:t}),t.\u0275inj=n.Mb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(g)],i.f]}),t})();r.d(e,"ReportModule",(function(){return v}));let v=(()=>{class t{}return t.\u0275mod=n.Nb({type:t}),t.\u0275inj=n.Mb({factory:function(e){return new(e||t)},imports:[[o.c,w]]}),t})()}}]);