(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1QCC":function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"f",(function(){return l})),r("EcEN");var a=r("LvDl");const n=(e,t)=>a.isEqual(e,t),i=e=>a.cloneDeep(e),s=(e,t)=>a.isEqual(e,t),c=e=>a.cloneDeep(e),o=e=>a.cloneDeep(e),l=(e,t)=>a.isEqual(e,t)},"6eBy":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("l7GE"),n=r("ZUHj");function i(e){return t=>t.lift(new s(e))}class s{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new c(e,this.durationSelector))}}class c extends a.a{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1,this.durationSubscription=null}_next(e){try{const t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(t){this.destination.error(t)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(e,t){let r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),r=Object(n.a)(this,t),r&&!r.closed&&this.add(this.durationSubscription=r)}notifyNext(e,t,r,a,n){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=null,t.unsubscribe(),this.remove(t)),this.value=null,this.hasValue=!1,super._next(e)}}}},Lcz0:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"mealTypeUpdate",(function(){return u})),r.d(a,"mealTypeCreate",(function(){return b})),r.d(a,"mealTypeDelete",(function(){return m})),r.d(a,"mealTypeDeleteFailed",(function(){return h}));var n=r("ofXK"),i=r("3Pt+"),s=r("tyNb"),c=r("fXoL");let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Jb({type:e,selectors:[["rg-meal-types-shell"]],decls:1,vars:0,template:function(e,t){1&e&&c.Qb(0,"router-outlet")},directives:[s.g],encapsulation:2,changeDetection:0}),e})();class l{}var d=r("RLuz"),p=r("kt0X");const u=Object(p.n)("[MealTypes] Update",Object(p.s)()),b=Object(p.n)("[MealTypes] Create",Object(p.s)()),m=Object(p.n)("[MealTypes] Delete",Object(p.s)()),h=Object(p.n)("[MealTypes] DeleteFailed",Object(p.s)());var y=r("FrCf"),f=r("1QCC"),T=r("XNiG"),v=r("l5mm"),C=r("lJxs"),O=r("6eBy");let j=(()=>{class e{constructor(e){this.fb=e,this.saved=new c.o,this.form=this.fb.group({caption:["",i.s.required],kkal:0,protein:0,fat:0,carbon:0}),this._mealTypeSub=new T.a,this._mealType$=this._mealTypeSub.asObservable().pipe(Object(C.a)(e=>e)),this._mealType$.subscribe(e=>{this.patchForm(e),this.recalculateFormChanges(e)}),this.form.valueChanges.pipe(Object(O.a)(()=>Object(v.a)(500))).subscribe(e=>{this.mealType.caption=e.caption,this.mealType.kkalTotal=e.kkal,this.mealType.proteinPart=e.protein,this.mealType.fatPart=e.fat,this.mealType.carbonPart=e.carbon,this.recalculateFormChanges(this.mealType)})}get mealType(){return this._mealType}set mealType(e){(!this._mealType&&e||e&&this._mealType&&e.id!==this._mealType.id)&&(this._mealType=Object(f.c)(e),this._mealTypeOriginal=Object(f.c)(e),this._mealTypeSub.next(this._mealType),this.form.markAsPristine(),this.form.markAsUntouched())}ngOnInit(){}patchForm(e){this.form.patchValue({caption:e.caption,kkal:e.kkalTotal,protein:e.proteinPart,fat:e.fatPart,carbon:e.carbonPart})}recalculateFormChanges(e){const t=Object(f.f)(e,this._mealTypeOriginal);t&&this.form.dirty&&this.form.markAsPristine(),!t&&this.form.pristine&&this.form.markAsDirty()}save(){this.form.valid&&(this.form.dirty?this.saved.next(this.mealType):this.errorMessages="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}resetClicked(){this._mealTypeSub.next(this._mealTypeOriginal)}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(i.c))},e.\u0275cmp=c.Jb({type:e,selectors:[["rg-meal-types-item-row"]],inputs:{index:"index",mealType:"mealType"},outputs:{saved:"saved"},decls:30,vars:14,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-sm-4"],["formControlName","caption","type","text",1,"form-control","form-control-sm"],["caption",""],[1,"form-group","col-sm-2"],["formControlName","kkal","type","number",1,"form-control","form-control-sm"],["formControlName","protein","type","number",1,"form-control","form-control-sm"],["formControlName","fat","type","number",1,"form-control","form-control-sm"],["formControlName","carbon","type","number",1,"form-control","form-control-sm"],[1,"form-row","justify-content-end"],[1,"col-auto"],["type","submit",1,"btn","btn-primary",3,"disabled","hidden"],[1,"btn","btn-secondary",3,"hidden","click"]],template:function(e,t){1&e&&(c.Vb(0,"form",0),c.hc("ngSubmit",(function(e){return t.save()})),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"label"),c.Fc(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),c.Ub(),c.Qb(5,"input",3,4),c.Ub(),c.Vb(7,"div",5),c.Vb(8,"label"),c.Fc(9,"\u041a\u041a\u0430\u043b"),c.Ub(),c.Qb(10,"input",6),c.Ub(),c.Vb(11,"div",5),c.Vb(12,"label"),c.Fc(13,"\u0411\u0435\u043b\u043a\u043e\u0432, %"),c.Ub(),c.Qb(14,"input",7),c.Ub(),c.Vb(15,"div",5),c.Vb(16,"label"),c.Fc(17,"\u0416\u0438\u0440\u043e\u0432, %"),c.Ub(),c.Qb(18,"input",8),c.Ub(),c.Vb(19,"div",5),c.Vb(20,"label"),c.Fc(21,"\u0423\u0433\u043b., %"),c.Ub(),c.Qb(22,"input",9),c.Ub(),c.Ub(),c.Vb(23,"div",10),c.Vb(24,"div",11),c.Vb(25,"button",12),c.Fc(26," Save "),c.Ub(),c.Ub(),c.Vb(27,"div",11),c.Vb(28,"button",13),c.hc("click",(function(e){return t.resetClicked()})),c.Fc(29," Reset "),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.oc("formGroup",t.form),c.Cb(3),c.Db("for","captionCtrl"+t.index),c.Cb(2),c.Db("id","captionCtrl"+t.index),c.Cb(3),c.Db("for","kkalCtrl"+t.index),c.Cb(2),c.Db("id","kkalCtrl"+t.index),c.Cb(2),c.Db("for","proteinCtrl"+t.index),c.Cb(2),c.Db("id","proteinCtrl"+t.index),c.Cb(2),c.Db("for","fatCtrl"+t.index),c.Cb(2),c.Db("id","fatCtrl"+t.index),c.Cb(2),c.Db("for","carbonCtrl"+t.index),c.Cb(2),c.Db("id","carbonCtrl"+t.index),c.Cb(3),c.oc("disabled",!t.form.valid)("hidden",!t.form.dirty),c.Cb(3),c.oc("hidden",!t.form.dirty))},directives:[i.u,i.l,i.e,i.a,i.k,i.d,i.p],styles:[""]}),e})();function k(e,t){if(1&e){const e=c.Wb();c.Vb(0,"div",8),c.Vb(1,"rg-meal-types-item-row",9),c.hc("saved",(function(t){return c.xc(e),c.jc().onSaved(t)})),c.Ub(),c.Vb(2,"div",10),c.Vb(3,"button",11),c.hc("click",(function(r){c.xc(e);const a=t.index;return c.jc().removeMealType(a)})),c.Qb(4,"i",12),c.Ub(),c.Ub(),c.Ub()}if(2&e){const e=t.$implicit,r=t.index;c.Cb(1),c.oc("mealType",e)("index",r)}}let g=(()=>{class e{constructor(){this.saved=new c.o,this.added=new c.o,this.deleted=new c.o}ngOnInit(){}onSaved(e){this.saved.next(e)}removeMealType(e){this.deleted.next(this.mealTypes[e].id)}addNewMealType(){this.added.next(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Jb({type:e,selectors:[["rg-meal-types-list"]],inputs:{mealTypes:"mealTypes"},outputs:{saved:"saved",added:"added",deleted:"deleted"},decls:10,vars:1,consts:[[1,"card","border-primary","m-3"],[1,"card-header"],[1,"card-body","text-primary"],[1,"card-text","pr-3"],["class","d-flex align-items-end",4,"ngFor","ngForOf"],[1,"form-group"],["type","button",1,"btn","btn-primary","ml-3","btn-sm",3,"click"],[1,"fas","fa-folder-plus","mr-1"],[1,"d-flex","align-items-end"],[1,"flex-grow-1",3,"mealType","index","saved"],[1,"justify-content-center","align-items-center"],["type","button",1,"btn","btn-primary","btn-sm","mx-3","mb-3",3,"click"],[1,"fas","fa-folder-minus"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Fc(2," Meal Types "),c.Ub(),c.Vb(3,"div",2),c.Vb(4,"div",3),c.Dc(5,k,5,2,"div",4),c.Vb(6,"div",5),c.Vb(7,"button",6),c.hc("click",(function(e){return t.addNewMealType()})),c.Qb(8,"i",7),c.Fc(9,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c MealType "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Cb(5),c.oc("ngForOf",t.mealTypes))},directives:[n.k,j],styles:[""]}),e})();const U=[{path:"",component:o,children:[{path:"",pathMatch:"full",redirectTo:"all"},{path:"all",component:(()=>{class e{constructor(e,t){this.store=e,this.shared=t,this.mealTypes$=this.store.select(d.f)}ngOnInit(){}onSaved(e){this.shared.ifEmpty(e.id)?this.store.dispatch(a.mealTypeCreate({mealType:e})):this.store.dispatch(a.mealTypeUpdate({mealType:e}))}onDeleted(e){this.shared.ifEmpty(e)||this.store.dispatch(a.mealTypeDelete({id:e}))}onAdded(){const e=new l;this.store.dispatch(a.mealTypeCreate({mealType:e}))}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(p.h),c.Pb(y.a))},e.\u0275cmp=c.Jb({type:e,selectors:[["rg-meal-types-provider"]],decls:2,vars:3,consts:[[3,"mealTypes","saved","added","deleted"]],template:function(e,t){1&e&&(c.Vb(0,"rg-meal-types-list",0),c.hc("saved",(function(e){return t.onSaved(e)}))("added",(function(e){return t.onAdded()}))("deleted",(function(e){return t.onDeleted(e)})),c.kc(1,"async"),c.Ub()),2&e&&c.oc("mealTypes",c.lc(1,1,t.mealTypes$))},directives:[g],pipes:[n.b],encapsulation:2,changeDetection:0}),e})()}]}];let x=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},imports:[[s.f.forChild(U)],s.f]}),e})();var V=r("snw9"),w=r("5+tZ"),M=r("JIr8"),S=r("LRne");let D=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)}}),e})();var F=r("AytR"),_=r("tk/3");let N=(()=>{class e{constructor(e,t){this.http=e,this.shared=t}updateMealType(e){return this.http.post(F.a.mealTypesUrl+F.a.updateMealType,e)}createMealType(e){return e.id=this.shared.getGuidEmpty(),this.http.post(F.a.mealTypesUrl+F.a.updateMealType,e)}deleteMealType(e){return this.http.post(F.a.mealTypesUrl+F.a.deleteMealType,`"${e}"`,{headers:{"Content-Type":"application/json"}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(_.b),c.dc(y.a))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac,providedIn:D}),e})(),P=(()=>{class e{constructor(e,t){this.actions$=e,this.mealTypesService=t,this.updateMealType$=Object(V.d)(()=>this.actions$.pipe(Object(V.e)(a.mealTypeUpdate),Object(w.a)(e=>this.mealTypesService.updateMealType(e.mealType).pipe(Object(C.a)(e=>d.a.mealTypeUpdateSuccess({mealType:e})))))),this.createMealType$=Object(V.d)(()=>this.actions$.pipe(Object(V.e)(a.mealTypeCreate),Object(w.a)(e=>this.mealTypesService.createMealType(e.mealType).pipe(Object(C.a)(e=>d.a.mealTypeCreateSuccess({mealType:e})))))),this.deleteMealType$=Object(V.d)(()=>this.actions$.pipe(Object(V.e)(a.mealTypeDelete),Object(w.a)(e=>this.mealTypesService.deleteMealType(e.id).pipe(Object(C.a)(e=>d.a.mealTypeDeleteSuccess({id:e})),Object(M.a)(e=>Object(S.a)(a.mealTypeDeleteFailed({status:e.error})))))))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(V.a),c.dc(N))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),e})();const $=Object(p.p)({deleteStatus:""},Object(p.r)(a.mealTypeDeleteFailed,(e,{status:t})=>Object.assign(Object.assign({},e),{deleteStatus:t})),Object(p.r)(d.a.mealTypeDeleteSuccess,(e,{id:t})=>Object.assign(Object.assign({},e),{deleteStatus:t})));function Q(e,t){return $(e,t)}var E=r("z6cu"),J=r("gCoc");let L=(()=>{class e{constructor(e){this.fakeback=e}intercept(e,t){if(e.url.includes(F.a.mealTypesUrl)&&e.url.endsWith(F.a.updateMealType)&&"POST"===e.method)return this.ok(this.fakeback.updateMealType(e.body));if(e.url.includes(F.a.mealTypesUrl)&&e.url.endsWith(F.a.deleteMealType)&&"POST"===e.method){const t=this.fakeback.deleteMealType(e.body);return t===e.body?this.ok(t):this.badRequest(t)}return t.handle(e)}ok(e){return Object(S.a)(new _.d({status:200,body:e}))}badRequest(e){return Object(S.a)(new _.d({status:400,body:e}))}error(e){return Object(E.a)({error:{message:e}})}}return e.\u0275fac=function(t){return new(t||e)(c.dc(J.a))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),e})();r.d(t,"MealTypesModule",(function(){return A}));let A=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},providers:[F.a.useFakeback?{provide:_.a,useClass:L,multi:!0}:[]],imports:[[n.c,x,i.r,p.j.forFeature("mealTypes",Q),V.c.forFeature([P]),D]]}),e})()},l5mm:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("HDdC"),n=r("D0XW"),i=r("Y7HM");function s(e=0,t=n.a){return(!Object(i.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=n.a),new a.a(r=>(r.add(t.schedule(c,e,{subscriber:r,counter:0,period:e})),r))}function c(e){const{subscriber:t,counter:r,period:a}=e;t.next(r),this.schedule({subscriber:t,counter:r+1,period:a},a)}}}]);