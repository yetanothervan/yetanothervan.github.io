function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1QCC":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return s})),n("EcEN");var r=n("LvDl"),a=function(e,t){return r.isEqual(e,t)},i=function(e){return r.cloneDeep(e)},o=function(e,t){return r.isEqual(e,t)},c=function(e){return r.cloneDeep(e)},l=function(e){return r.cloneDeep(e)},s=function(e,t){return r.isEqual(e,t)}},"6eBy":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("l7GE"),a=n("ZUHj");function i(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(t){_classCallCheck(this,e),this.durationSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new c(e,this.durationSelector))}}]),e}(),c=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(a.a)(this,t))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(e,t,n,r,a){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,_get(_getPrototypeOf(t.prototype),"_next",this).call(this,e)}}}]),t}(r.a)},Lcz0:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"mealTypeUpdate",(function(){return f})),n.d(r,"mealTypeCreate",(function(){return b})),n.d(r,"mealTypeDelete",(function(){return y})),n.d(r,"mealTypeDeleteFailed",(function(){return m}));var a,i=n("ofXK"),o=n("3Pt+"),c=n("tyNb"),l=n("fXoL"),s=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=l.Jb({type:a,selectors:[["rg-meal-types-shell"]],decls:1,vars:0,template:function(e,t){1&e&&l.Qb(0,"router-outlet")},directives:[c.g],encapsulation:2,changeDetection:0}),a),u=function e(){_classCallCheck(this,e)},p=n("RLuz"),d=n("kt0X"),f=Object(d.n)("[MealTypes] Update",Object(d.s)()),b=Object(d.n)("[MealTypes] Create",Object(d.s)()),y=Object(d.n)("[MealTypes] Delete",Object(d.s)()),m=Object(d.n)("[MealTypes] DeleteFailed",Object(d.s)()),h=n("FrCf"),v=n("1QCC"),T=n("XNiG"),k=n("l5mm"),C=n("lJxs"),O=n("6eBy");function _(e,t){1&e&&(l.Vb(0,"div"),l.Fc(1,"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0438\u043ce\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),l.Ub())}function g(e,t){1&e&&(l.Vb(0,"div"),l.Fc(1,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u0432 \u0431\u0435\u043b\u043a\u043e\u0432, \u0436\u0438\u0440\u043e\u0432 \u0438 \u0443\u0433\u043b\u0435\u0432\u043e\u0434\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u0430 \u0442\u043e\u0447\u043d\u043e \u0440\u0430\u0432\u043d\u044f\u0442\u0441\u044f 100"),l.Ub())}var j,w=((j=function(){function e(t){var n=this;_classCallCheck(this,e),this.fb=t,this.saved=new l.o,this.form=this.fb.group({caption:["",o.s.required],kkal:0,protein:0,fat:0,carbon:0},{validators:[this.validatorSumIs100]}),this._mealTypeSub=new T.a,this._mealType$=this._mealTypeSub.asObservable().pipe(Object(C.a)((function(e){return e}))),this._mealType$.subscribe((function(e){n.patchForm(e),n.recalculateFormChanges(e)})),this.form.valueChanges.pipe(Object(O.a)((function(){return Object(k.a)(500)}))).subscribe((function(e){n.mealType.caption=e.caption,n.mealType.kkalTotal=e.kkal,n.mealType.proteinPart=e.protein,n.mealType.fatPart=e.fat,n.mealType.carbonPart=e.carbon,n.recalculateFormChanges(n.mealType)}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"patchForm",value:function(e){this.form.patchValue({caption:e.caption,kkal:e.kkalTotal,protein:e.proteinPart,fat:e.fatPart,carbon:e.carbonPart})}},{key:"validatorSumIs100",value:function(e){var t,n,r,a,i,o;return 100!==(null===(n=null===(t=e)||void 0===t?void 0:t.get("protein"))||void 0===n?void 0:n.value)+(null===(a=null===(r=e)||void 0===r?void 0:r.get("fat"))||void 0===a?void 0:a.value)+(null===(o=null===(i=e)||void 0===i?void 0:i.get("carbon"))||void 0===o?void 0:o.value)?{sumvalidator:!0}:null}},{key:"recalculateFormChanges",value:function(e){var t=Object(v.f)(e,this._mealTypeOriginal);t&&this.form.dirty&&this.form.markAsPristine(),!t&&this.form.pristine&&this.form.markAsDirty()}},{key:"save",value:function(){this.form.valid&&(this.form.dirty?this.saved.next(this.mealType):this.errorMessages="\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}},{key:"resetClicked",value:function(){this._mealTypeSub.next(this._mealTypeOriginal)}},{key:"mealType",get:function(){return this._mealType},set:function(e){(!this._mealType&&e||e&&this._mealType&&e.id!==this._mealType.id)&&(this._mealType=Object(v.c)(e),this._mealTypeOriginal=Object(v.c)(e),this._mealTypeSub.next(this._mealType),this.form.markAsPristine(),this.form.markAsUntouched())}}]),e}()).\u0275fac=function(e){return new(e||j)(l.Pb(o.c))},j.\u0275cmp=l.Jb({type:j,selectors:[["rg-meal-types-item-row"]],inputs:{index:"index",mealType:"mealType"},outputs:{saved:"saved"},decls:33,vars:15,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-sm-4"],["formControlName","caption","type","text",1,"form-control","form-control-sm"],["caption",""],[1,"form-group","col-sm-2"],["formControlName","kkal","type","number",1,"form-control","form-control-sm"],["formControlName","protein","type","number",1,"form-control","form-control-sm"],["formControlName","fat","type","number",1,"form-control","form-control-sm"],["formControlName","carbon","type","number",1,"form-control","form-control-sm"],[1,"form-row","justify-content-end",3,"hidden"],[1,"text-danger","mr-auto","align-self-start","ml-3","mb-3"],[4,"ngIf"],[1,"col-auto"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-secondary",3,"click"]],template:function(e,t){if(1&e&&(l.Vb(0,"form",0),l.hc("ngSubmit",(function(e){return t.save()})),l.Vb(1,"div",1),l.Vb(2,"div",2),l.Vb(3,"label"),l.Fc(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),l.Ub(),l.Qb(5,"input",3,4),l.Ub(),l.Vb(7,"div",5),l.Vb(8,"label"),l.Fc(9,"\u041a\u041a\u0430\u043b"),l.Ub(),l.Qb(10,"input",6),l.Ub(),l.Vb(11,"div",5),l.Vb(12,"label"),l.Fc(13,"\u0411\u0435\u043b\u043a\u043e\u0432, %"),l.Ub(),l.Qb(14,"input",7),l.Ub(),l.Vb(15,"div",5),l.Vb(16,"label"),l.Fc(17,"\u0416\u0438\u0440\u043e\u0432, %"),l.Ub(),l.Qb(18,"input",8),l.Ub(),l.Vb(19,"div",5),l.Vb(20,"label"),l.Fc(21,"\u0423\u0433\u043b., %"),l.Ub(),l.Qb(22,"input",9),l.Ub(),l.Ub(),l.Vb(23,"div",10),l.Vb(24,"small",11),l.Dc(25,_,2,0,"div",12),l.Dc(26,g,2,0,"div",12),l.Ub(),l.Vb(27,"div",13),l.Vb(28,"button",14),l.Fc(29," Save "),l.Ub(),l.Ub(),l.Vb(30,"div",13),l.Vb(31,"button",15),l.hc("click",(function(e){return t.resetClicked()})),l.Fc(32," Reset "),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e){var n,r=null==(n=t.form.get("caption"))?null:null==n.errors?null:n.errors.required;l.oc("formGroup",t.form),l.Cb(3),l.Db("for","captionCtrl"+t.index),l.Cb(2),l.Db("id","captionCtrl"+t.index),l.Cb(3),l.Db("for","kkalCtrl"+t.index),l.Cb(2),l.Db("id","kkalCtrl"+t.index),l.Cb(2),l.Db("for","proteinCtrl"+t.index),l.Cb(2),l.Db("id","proteinCtrl"+t.index),l.Cb(2),l.Db("for","fatCtrl"+t.index),l.Cb(2),l.Db("id","fatCtrl"+t.index),l.Cb(2),l.Db("for","carbonCtrl"+t.index),l.Cb(2),l.Db("id","carbonCtrl"+t.index),l.Cb(1),l.oc("hidden",!t.form.dirty),l.Cb(2),l.oc("ngIf",r),l.Cb(1),l.oc("ngIf",null==t.form?null:null==t.form.errors?null:t.form.errors.sumvalidator),l.Cb(2),l.oc("disabled",!t.form.valid)}},directives:[o.u,o.l,o.e,o.a,o.k,o.d,o.p,i.l],styles:[""]}),j);function U(e,t){if(1&e){var n=l.Wb();l.Vb(0,"div",8),l.Vb(1,"rg-meal-types-item-row",9),l.hc("saved",(function(e){return l.xc(n),l.jc().onSaved(e)})),l.Ub(),l.Vb(2,"div",10),l.Vb(3,"button",11),l.hc("click",(function(e){l.xc(n);var r=t.index;return l.jc().removeMealType(r)})),l.Qb(4,"i",12),l.Ub(),l.Ub(),l.Ub()}if(2&e){var r=t.$implicit,a=t.index;l.Cb(1),l.oc("mealType",r)("index",a)}}var x,V,S,D,M,P,F=((x=function(){function e(){_classCallCheck(this,e),this.saved=new l.o,this.added=new l.o,this.deleted=new l.o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSaved",value:function(e){this.saved.next(e)}},{key:"removeMealType",value:function(e){this.deleted.next(this.mealTypes[e].id)}},{key:"addNewMealType",value:function(){this.added.next(!0)}}]),e}()).\u0275fac=function(e){return new(e||x)},x.\u0275cmp=l.Jb({type:x,selectors:[["rg-meal-types-list"]],inputs:{mealTypes:"mealTypes"},outputs:{saved:"saved",added:"added",deleted:"deleted"},decls:10,vars:1,consts:[[1,"card","border-primary","m-3"],[1,"card-header"],[1,"card-body","text-primary"],[1,"card-text","pr-3"],["class","d-flex align-items-end",4,"ngFor","ngForOf"],[1,"form-group"],["type","button",1,"btn","btn-primary","ml-3","btn-sm",3,"click"],[1,"fas","fa-folder-plus","mr-1"],[1,"d-flex","align-items-end"],[1,"flex-grow-1",3,"mealType","index","saved"],[1,"justify-content-center","align-items-center"],["type","button",1,"btn","btn-primary","btn-sm","mx-3","mb-3",3,"click"],[1,"fas","fa-folder-minus"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Fc(2," Meal Types "),l.Ub(),l.Vb(3,"div",2),l.Vb(4,"div",3),l.Dc(5,U,5,2,"div",4),l.Vb(6,"div",5),l.Vb(7,"button",6),l.hc("click",(function(e){return t.addNewMealType()})),l.Qb(8,"i",7),l.Fc(9,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c MealType "),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(5),l.oc("ngForOf",t.mealTypes))},directives:[i.k,w],styles:[""]}),x),N=[{path:"",component:s,children:[{path:"",pathMatch:"full",redirectTo:"all"},{path:"all",component:(V=function(){function e(t,n){_classCallCheck(this,e),this.store=t,this.shared=n,this.mealTypes$=this.store.select(p.f)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSaved",value:function(e){this.shared.ifEmpty(e.id)?this.store.dispatch(r.mealTypeCreate({mealType:e})):this.store.dispatch(r.mealTypeUpdate({mealType:e}))}},{key:"onDeleted",value:function(e){this.shared.ifEmpty(e)||this.store.dispatch(r.mealTypeDelete({id:e}))}},{key:"onAdded",value:function(){var e=new u;this.store.dispatch(r.mealTypeCreate({mealType:e}))}}]),e}(),V.\u0275fac=function(e){return new(e||V)(l.Pb(d.h),l.Pb(h.a))},V.\u0275cmp=l.Jb({type:V,selectors:[["rg-meal-types-provider"]],decls:2,vars:3,consts:[[3,"mealTypes","saved","added","deleted"]],template:function(e,t){1&e&&(l.Vb(0,"rg-meal-types-list",0),l.hc("saved",(function(e){return t.onSaved(e)}))("added",(function(e){return t.onAdded()}))("deleted",(function(e){return t.onDeleted(e)})),l.kc(1,"async"),l.Ub()),2&e&&l.oc("mealTypes",l.lc(1,1,t.mealTypes$))},directives:[F],pipes:[i.b],encapsulation:2,changeDetection:0}),V)}]}],I=((S=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:S}),S.\u0275inj=l.Mb({factory:function(e){return new(e||S)},imports:[[c.f.forChild(N)],c.f]}),S),E=n("snw9"),R=n("5+tZ"),$=n("JIr8"),Q=n("LRne"),J=((D=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:D}),D.\u0275inj=l.Mb({factory:function(e){return new(e||D)}}),D),L=n("AytR"),q=n("tk/3"),A=((P=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.shared=n}return _createClass(e,[{key:"updateMealType",value:function(e){return this.http.post(L.a.mealTypesUrl+L.a.updateMealType,e)}},{key:"createMealType",value:function(e){return e.id=this.shared.getGuidEmpty(),this.http.post(L.a.mealTypesUrl+L.a.updateMealType,e)}},{key:"deleteMealType",value:function(e){return this.http.post(L.a.mealTypesUrl+L.a.deleteMealType,'"'.concat(e,'"'),{headers:{"Content-Type":"application/json"}})}}]),e}()).\u0275fac=function(e){return new(e||P)(l.dc(q.b),l.dc(h.a))},P.\u0275prov=l.Lb({token:P,factory:P.\u0275fac,providedIn:J}),P),z=((M=function e(t,n){var a=this;_classCallCheck(this,e),this.actions$=t,this.mealTypesService=n,this.updateMealType$=Object(E.d)((function(){return a.actions$.pipe(Object(E.e)(r.mealTypeUpdate),Object(R.a)((function(e){return a.mealTypesService.updateMealType(e.mealType).pipe(Object(C.a)((function(e){return p.a.mealTypeUpdateSuccess({mealType:e})})))})))})),this.createMealType$=Object(E.d)((function(){return a.actions$.pipe(Object(E.e)(r.mealTypeCreate),Object(R.a)((function(e){return a.mealTypesService.createMealType(e.mealType).pipe(Object(C.a)((function(e){return p.a.mealTypeCreateSuccess({mealType:e})})))})))})),this.deleteMealType$=Object(E.d)((function(){return a.actions$.pipe(Object(E.e)(r.mealTypeDelete),Object(R.a)((function(e){return a.mealTypesService.deleteMealType(e.id).pipe(Object(C.a)((function(e){return p.a.mealTypeDeleteSuccess({id:e})})),Object($.a)((function(e){return Object(Q.a)(r.mealTypeDeleteFailed({status:e.error}))})))})))}))}).\u0275fac=function(e){return new(e||M)(l.dc(E.a),l.dc(A))},M.\u0275prov=l.Lb({token:M,factory:M.\u0275fac}),M),G=Object(d.p)({deleteStatus:""},Object(d.r)(r.mealTypeDeleteFailed,(function(e,t){var n=t.status;return Object.assign(Object.assign({},e),{deleteStatus:n})})),Object(d.r)(p.a.mealTypeDeleteSuccess,(function(e,t){var n=t.id;return Object.assign(Object.assign({},e),{deleteStatus:n})})));function X(e,t){return G(e,t)}var B,W=n("z6cu"),H=n("gCoc"),Z=((B=function(){function e(t){_classCallCheck(this,e),this.fakeback=t}return _createClass(e,[{key:"intercept",value:function(e,t){if(e.url.includes(L.a.mealTypesUrl)&&e.url.endsWith(L.a.updateMealType)&&"POST"===e.method)return this.ok(this.fakeback.updateMealType(e.body));if(e.url.includes(L.a.mealTypesUrl)&&e.url.endsWith(L.a.deleteMealType)&&"POST"===e.method){var n=this.fakeback.deleteMealType(e.body);return n===e.body?this.ok(n):this.badRequest(n)}return t.handle(e)}},{key:"ok",value:function(e){return Object(Q.a)(new q.d({status:200,body:e}))}},{key:"badRequest",value:function(e){return Object(Q.a)(new q.d({status:400,body:e}))}},{key:"error",value:function(e){return Object(W.a)({error:{message:e}})}}]),e}()).\u0275fac=function(e){return new(e||B)(l.dc(H.a))},B.\u0275prov=l.Lb({token:B,factory:B.\u0275fac}),B);n.d(t,"MealTypesModule",(function(){return Y}));var K,Y=((K=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:K}),K.\u0275inj=l.Mb({factory:function(e){return new(e||K)},providers:[L.a.useFakeback?{provide:q.a,useClass:Z,multi:!0}:[]],imports:[[i.c,q.c,I,o.r,d.j.forFeature("mealTypes",X),E.c.forFeature([z]),J]]}),K)},l5mm:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("HDdC"),a=n("D0XW"),i=n("Y7HM");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;return(!Object(i.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=a.a),new r.a((function(n){return n.add(t.schedule(c,e,{subscriber:n,counter:0,period:e})),n}))}function c(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}}}]);